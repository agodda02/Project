import pytest
from bs4 import BeautifulSoup
from Contribution import *
from datetime import date

@pytest.fixture
def soup():
    with open("example_1975.txt", "r") as f:
        data = f.read()
    soup = BeautifulSoup(data, 'html.parser')
    return soup  

def test_question(soup):
    link = '1975-01-14/debates/e0279e7f-6655-463f-ae5a-e39aa443a117/OralAnswersToQuestions'
    contributions = soup.find_all(class_ = 'debate-item-contributiondebateitem')
    test = Contribution(contributions[0], link)
    assert test.contributor == "Mr. Biggs-Davison"
    assert test.paragraph == "asked the Secretary of State for Defence whether he will make a statement about the progress of military operations in Northern Ireland."
    assert test.question_or_answer == "question"
    assert test.date == date(1975, 01, 14)

def test_answer(soup):
    link = '1975-01-14/debates/e0279e7f-6655-463f-ae5a-e39aa443a117/OralAnswersToQuestions'
    contributions = soup.find_all(class_ = 'debate-item-contributiondebateitem')
    test = Contribution(contributions[126], link)
    assert test.contributor == "The Prime Minister"
    assert test.paragraph == "I did so on 9th December, Sir."
    assert test.question_or_answer == "answer"
    assert test.date == date(1975, 01, 14)
